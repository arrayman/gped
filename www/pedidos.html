<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2" />
    <title>jquery mobile base_0.2</title>
    
	
	<!-- <link rel="stylesheet" href="./css/jquery.mobile-1.3.2.min.css" /> -->
	<!-- <script src="./js/jquery-2.0.3.min.js"></script> -->
	<!-- <script src="./js/JQueryMobile/jquery.mobile-1.3.2.min.js"></script>  -->
	<link rel="stylesheet" href="./css/jquery.mobile-1.3.2.css" />
	<link rel="stylesheet" href="./css/pedido.css" /> 
	<link rel="stylesheet" href="./css/icons.css" /> 
	<!-- Bootstrap 
    <link href="./css/bootstrap.min.css" rel="stylesheet" media="screen">-->
	
</head>

<body>

    <div data-role="page" id="main" data-title="Geped" >
        
		<div data-role="header" >
            <!-- <h1> Gestion de pedidos </h1> -->
			Gestion de pedidos - Pedidos
        </div>

		<div data-role="content" >
			<div class="ui-grid-b my-breakpoint">
				<span id="grid_pedidos_cab">
					<div class="ui-block-a">
						<div data-role="controlgroup" data-type="horizontal" data-mini="true">
							<a href="" data-role="button" data-icon="arrow-u" data-iconpos="notext">Up</a>
							<a href="" data-role="button" data-icon="arrow-d" data-iconpos="notext">Down</a>
							<a href="" data-role="button" data-icon="delete" data-iconpos="notext" onclick="grid_click('1','b')">Delete</a>
						</div> 
					</div>

					<div class="ui-block-b">
						<h6>codigo</h6>
					</div>

					<div class="ui-block-c">
						<h6>descripción</h6>
					</div>
				</span>

				<span id="grid_pedidos"> 
				</span>

				<span id="grid_pedidos_pie">
					<div class="ui-block-a">
						
					</div>

					<div class="ui-block-b">
						pie
					</div>
					<div class="ui-block-c">
						pie
					</div>
				 </span>
			</div>
			<div>
				<a href="#popupPedido" class="glyphishIcon" data-rel="popup" data-position-to="window" data-role="button"  data-inline="true" data-icon="pedido" data-transition="pop" data-iconpos="top" data-min="true" > Nuevo pedido </a>
				<!-- <a href="#popup" data-role="button" data-rel="dialog" data-transition="pop" data-theme="c" class="ui-btn ui-btn-corner-all ui-shadow ui-btn-up-c"><span class="ui-btn-inner ui-btn-corner-all" aria-hidden="true"><span class="ui-btn-text">Show page "popup" (as a dialog)</span></span></a> -->
				<!--	<a href="#popupPedido" class="glyphishIcon" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-icon="check" data-theme="a" data-transition="pop">Sign in</a>
				<a href="#popupPedido" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-icon="check" data-theme="a" data-transition="pop">Sign in</a> -->
			</div>
			<div data-role="popup" id="popupPedido" data-theme="a" class="ui-corner-all">
	    		<!-- <form> -->
	        		<div style="padding:10px 20px;">
	        			<div class="ui-grid-a">
	        				<div class="ui-block-a">
	        					<h5>Nuevo pedido</h5>	
	        				</div>
	        				<div class="ui-block-b">
	        					<a class="ui-btn-right" href="pedidos.html" data-role="button" data-icon="delete" data-iconpos="notext">Delete</a>
	        				</div>
	        			</div>

	        			<div data-role="controlgroup" data-type="horizontal" data-mini="true">
	        			
	        			</div>
	        			
			            
			            <label for="tbcod" class="ui-hidden-accessible">codigo:</label>
	            		<input type="text" size=5 name="user" id="tbcod" value="" placeholder="codigo" data-theme="a">
	            		<label for="tbdesc" class="ui-hidden-accessible">descripción:</label>
	            		<input type="text" name="pass" id="tbdesc" value="" placeholder="descripción" data-theme="a">
	            		<button onclick= "grabar_pedido()" type="submit" data-theme="c" data-icon="check">Guardar</button>
	        		</div>
	    		<!-- </form> -->
			</div>
			<a href="" data-role="button" data-icon="check" data-iconpos="notext" onclick="grid_click(1,g)">grabar</a>
		</div>		
		<div data-role="footer" data-theme="a" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a href="articulo.html#main" rel="external">Articulos</a></li>
					<li><a href="articulo2.html#main" rel="external">Articulos 2</a></li>
					<!-- <li><a href="p1.html" data-transition="none" >p1</a></li> -->
				</ul>
			</div><!-- /navbar -->
			<div class="ui-grid-b">
				<div class="ui-block-a">
					<p id="lbLog" > log: </p>		
				</div>
				<div class="ui-block-b">
					<a href="index.html#main" data-rel="back" data-role="button" > Regresar 2</a>
				</div>
				<div class="ui-block-c">
						<p class="ui-btn-right"> <a>(c) arrayman.com</a> </p> 
				</div>
			</div>
		</div> 
    </div>



<!-- ********************************************************* -->	
<!-- ***** CODIGO **** -->	
<!-- ********************************************************* -->	

	<script src="./js/jquery-2.0.3.js"></script>
    <script src="./js/JQueryMobile/jquery.mobile-1.3.2.js"></script> 
    <script type="text/javascript" src="cordova.js"></script>

    <!-- app files-->
        <script type="text/javascript" src="js/app/pedido.js"></script>
        <script type="text/javascript" src="js/app/articulo.js"></script>
        <script type="text/javascript" src="js/app/db.js"></script>
        <script type="text/javascript" src="js/app/index.js"></script>
		<script src="./js/jsrender/jsrender.js"></script> <!---->

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- <script src="//code.jquery.com/jquery.js"></script> -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- <script src="./js/bootstrap-3.0.0/bootstrap.min.js"></script> -->

        <script type="text/javascript" >
        
			
			var g_oPed = '';
    		$(document).ready(function () 
    		{
        		//load_arts_in_lv();
        		g_oPed = pck_Ped.oPed;		
        		render_pedidos();
      		});

    		
    		function grabar_pedido()
    		{
    			oPed = new pck_Ped.TPED();
    			oPed.codigo = $('#tbcod').val();
    			oPed.descrip = $('#tbdesc').val();
    			oPed.fecha = Date();

    			pck_Db.run_sql(pck_Db.oTDb,pck_Ped.db_Crud_tblPEDS(oPed),observer);  //inserto el pedido en sqlite

    			function observer(oresult)
    			{
    				if (oresult != null) //error
    					alert(oresult);
    				else
    					render_pedidos();

    			}
    		}

    		function render_pedidos(bRelolad)
    		{
    			//$('#grid_pedidos').html('<div class="ui-block-a"> botones </div><div class="ui-block-b">2123 </div> <div class="ui-block-c">Descripcion de 2123 </div>');
    			
    			//if (g_oPed.list.length == 0) or (bRelolad)
    			if (g_oPed == null)
    				g_oPed = pck_Ped.oPed;

				pck_Ped.dbget_peds(g_oPed,null,obs_loaded);

				function obs_loaded()
				{
					$('#grid_pedidos').html(pck_Ped.render_as_tmpl(g_oPed.list));    	
					//$('a').button();
					$("[data-role=controlgroup]").controlgroup();	//forzamos la aplicacion de estilos a posteriori	

				}

    // 			<div class="ui-block-a">
				// </div>
				// <div class="ui-block-b">
				// </div>
				// <div class="ui-block-c">
				// </div>
    			//alert('registro insertado');
	   		}

	   		function grid_click(obj,op)
			{
					alert(obj);
					alert(op);
			}
    </script>

</body>

</html>
