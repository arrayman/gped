<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2" />
    <title>jquery mobile base_0.2</title>
    
	
	<!-- <link rel="stylesheet" href="./css/jquery.mobile-1.3.2.min.css" /> -->
	<!-- <script src="./js/jquery-2.0.3.min.js"></script> -->
	<!-- <script src="./js/JQueryMobile/jquery.mobile-1.3.2.min.js"></script>  -->
	<link rel="stylesheet" href="./css/jquery.mobile-1.3.2.css" />
	<link rel="stylesheet" href="./css/articulo.css" />
	<!-- Bootstrap 
    <link href="./css/bootstrap.min.css" rel="stylesheet" media="screen">-->
	
</head>

<body>

    <div data-role="page" id="main" data-title="Geped" >
        
		<div data-role="header" >
            <!-- <h1> Gestion de pedidos </h1> -->
			Gestion de pedidos - Articulos
        </div>
		

		<div data-role="content" >

			<div class="ui-grid-d my-breakpoint">
				<div class="ui-block-a">
					<a data-role="button" data-inline="true" onclick= "Get_From_Qr()" data-icon="search" data-iconpos="right" data-min="true"> Qr </a>
				</div>

				<div class="ui-block-b">
					<div data-role="fieldcontain" class="ui-hide-label " data-controltype="textinput" data-min="true">
			            <label for="tbCodigo">Codigo:</label>
			            <input type="text" name="Codigo" id="tbCodigo" value="" placeholder="Codigo" />
					</div>
				</div>

				<div class="ui-block-c">
					<div data-role="fieldcontain" class="ui-hide-label " data-controltype="textinput" data-min="true">
			            <label for="tbUnidades">Unidades:</label>
			            <input type="text" name="Unidades" id="tbUnidades" value="" placeholder="Cantidad" />
					</div>
				</div>

				 <div class="ui-block-d">
					<a data-role="button" data-inline="true" onclick= "search_art()" data-icon="check" data-iconpos="right" data-min="true">
                          Add
            		</a>
				</div>
				<div class="ui-block-e">
					<span id="lbDesc">Descripción: </span>
				</div>
			</div>

			<!-- <div id="lvArts_kk" >
				<h3> Articulos</h3>
				<ul data-role="listview" data-inset="true">
					<li>
						tres
					</li>
					<li>
						cuatro
					</li>
				</ul>
			</div> -->

			<div id="lvArts"  > <!-- data-role="collapsible" -->
				<!-- <h3> Articul</h3>
				<ul data-role="listview" data-inset="true">
					<li>
						uno
					</li>
					<li>
						dos
					</li>
				</ul> -->
			</div>

			<div class="ui-grid-d my-breakpoint">
				<div class="ui-block-a">
					<label for="search-basic">Search Input:</label>
					<input type="search" name="search" id="search-basic" value="" />
				</div>

				<div class="ui-block-b">
					<div data-role="fieldcontain">
						<label for="search-2">Search Input:</label>
						<input type="search" name="search-2" id="search-2" value="" />
					</div>
				</div>
				<div class="ui-block-c">3</div>
				<div class="ui-block-d">4</div>
			
				<div class="ui-block-e">
					<!--<a data-role="button" data-inline="true" onclick= "show_art()" data-icon="search"
                      data-iconpos="right">
                          Qr
            		</a>-->
				 	<input id="kkButton" type="button" value="mostrar"  onclick= "show_art()" /> 	 
				</div>
			</div>

		</div>		
				
			
		<div data-role="footer" data-theme="a" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<!-- <li><a href="index.html#main" data-transition="none" rel="external">Lista</a></li>
					<li><a href="index.html#pantalla2" data-transition="none" rel="external">Articulo</a></li> -->
					<li><a class="glyphishIcon" href="index.html#main" rel="external" data-icon="cloud">home</a></li>
					<li><a href="pedidos.html#main" rel="external">pedidos</a></li>
					<li><a href="articulo.html#main" rel="external">Articulos</a></li>
					<li><a href="articulo2.html#main" rel="external">Articulos 2</a></li>
					<!-- <li><a href="p1.html" data-transition="none" >p1</a></li> -->
				</ul>
			</div><!-- /navbar -->
			<div class="ui-grid-b my-breakpoint">
				<div class="ui-block-a">
					<p id="lbLog" > log: </p>		
				</div>


				<div class="ui-block-b">
					<p class="ui-btn-right"> <a>(c) arrayman.com</a> </p> 
					<a href="index.html#main" data-rel="back" data-role="button" > Regresar 2</a>
					<!-- <span style="float:right"> <a>(c) arrayman.com</a> </span>--> 
				</div>
			</div>
		</div> 
    </div>
	


	<script src="./js/jquery-2.0.3.js"></script>
    <script src="./js/JQueryMobile/jquery.mobile-1.3.2.js"></script> 
    <script type="text/javascript" src="cordova.js"></script>

    <!-- app files-->
        <script type="text/javascript" src="js/app/pedido.js"></script>
        <script type="text/javascript" src="js/app/articulo.js"></script>
        <script type="text/javascript" src="js/app/db.js"></script>
        <script type="text/javascript" src="js/app/index.js"></script>
		<script src="./js/jsrender/jsrender.js"></script> <!---->

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- <script src="//code.jquery.com/jquery.js"></script> -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- <script src="./js/bootstrap-3.0.0/bootstrap.min.js"></script> -->

        <script type="text/javascript" >
        
		//var apiUrl = oArt.url_get_arts;
			var g_oArt = pck_Art.oArt; //new TArt;
					
			var oPedidos = new Array();

    		$(document).ready(function () 
    		{
        		//cargar articulos
        		$('#lbLog').html(g_oArt.tostring());
    			//$('#lbDesc').html('Descripción: ' + g_oArt.render_as_p());
    			//$('#lbDesc').html('Descripción: ' + g_oArt.render_as_p());
    			var l_oArt = new pck_Art.TART(oPedidos);
    			//l_oArt.get_all(null,obs_loaded);
    			l_oArt.dbget_all(l_oArt,null,obs_loaded);
    			function obs_loaded()
    			{	
    				$('#lvArts').html('<div id="lvArts"></div>');
    				$('#lvArts').html(render_as_tmpl(oPedidos));
		  			$('#lvArts .ul_art').listview();
		  			//$('#lvArts .ul_art').listview('refresh');
	  				$('#lvArts').collapsible();
	  				//$('#lvArts_kk').collapsible();
				}
      		});

    		function show_art()
    		{
    			cordova

    // 			$('#lbLog').html(g_oArt.tostring());
    			
    // 			var l_oArt = new pck_Art.TART(oPedidos);

    // 			l_oArt.dbget_all(l_oArt,null,obs_loaded);
    // 			function obs_loaded()
    // 			{	
    // 				$('#lvArts').html('<div id="lvArts"></div>');
    // 				$('#lvArts').html(render_as_tmpl(oPedidos));
		  // 			//$('#lvArts .ul_art').listview();
		  // 			//$('#lvArts .ul_art').listview('refresh');
	  			
	  	// 			$('#lvArts').collapsible();
	  	// 			//$('#lvArts_kk').collapsible();
				// }
    		}

    		function Get_From_Qr()
    		{	
    			$('#lbLog').html("dentro function Get_From_Qr ");
    			//cordova

    			cordova.plugins.barcodeScanner.scan(
     				function (result) {
          				alert("We got a barcode\n" +
                			"Result: " + result.text + "\n" +
	                		"Format: " + result.format + "\n" +
    	            		"Cancelled: " + result.cancelled);
      				}, 
      				function (error) {
          				alert("Scanning failed: " + error);
      				}
   				);

   				alert('fin scan');
    		}



    		function search_art()
    		{
    			var sart = $('#tbCodigo').val(); 
    			var oArt = new pck_Art.TART;
    			oArt.get_this(sart);
    			oArt.add2list();
    			$('#lbDesc').html(oArt.tostring());
    			
    		}

    </script>

</body>

</html>
